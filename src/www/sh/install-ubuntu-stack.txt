#!/bin/bash
# bash <(curl -s http://test.parentnode.dk/sh/install-ubuntu-stack.txt)

# curl -L http://test.parentnode.dk/sh/install-ubuntu-stack.txt | bash

# curl -L http://test.parentnode.dk/sh/install-ubuntu-stack.txt > install-ubuntu-stack.sh && sudo ./install-ubuntu-stack.sh

echo 
echo "         Welcome to the          "
echo "parentNode/Ubuntu stack installer"
echo


echo
echo "Updating LOCALE information"
echo

sudo apt install language-pack-UTF-8
sudo locale-gen UTF-8
/usr/sbin/update-locale LANG=en_GB.utf8


echo
echo "Updating package information"
echo

# UPDATE APT AND UPGRADE ALL EXISTING SOFTWARE
sudo apt update


echo
echo "Upgrading package information"
echo

sudo apt full-upgrade



# INSTALL GIT
sudo apt install git


# DOES TOOLS ALREADY EXIST
if [ ! -d "/srv/tools" ]; then

	# CLONE THE FULL UBUNTU INSTALL AND TOOLS FROM GITHUB
	sudo git clone https://github.com/parentnode/ubuntu_environment /srv/tools

else

	cd /srv/tools && sudo git pull && cd 

fi


# RUN INSTALL SCRIPT
sudo /srv/tools/_tools/install.sh
